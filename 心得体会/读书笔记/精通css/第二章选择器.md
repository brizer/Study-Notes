#**第二章 为样式找到应用目标**

---
##**前言**

本章主要巩固了css的选择器知识，和如何维护样式表的一些技巧。

---

##**选择器**



最常见的有**元素选择器**，**ID选择器**和**类选择器**。示例如下：

```
p {}
#id {}
.class {}
```
他们可以和**后代选择器**，**兄弟选择器**还有**子选择器**一起协同工作：

```
p img {}
#id + p {}
.class > p {}
```
这里需要注意后代选择器和子选择器的区别。**后代选择器**是选择一个元素的所有后代，而**子选择器**只选择元素的直接后代。

还有属性选择符和伪类、伪元素等[各种选择符](http://www.w3school.com.cn/cssref/css_selectors.asp)。

这里就不一一去介绍了。主要说一下**伪类和伪元素的区别**：
**伪类**用于向某些选择器添加特殊的效果。
**伪元素**用于将特殊的效果添加到某些选择器。

上面是w3c对两者的定义。
下面来进行举例。首先是**伪类**：
| 伪类| 作用 | 
| ------ |:--------| 
| :active | 将样式添加到被激活的元素 |
| :focus | 将样式添加到被选中的元素 | 
| :hover | 当鼠标悬浮在元素上方时，向元素添加样式 |
| :link | 将特殊的样式添加到未被访问过的链接 |
| :visited | 将特殊的样式添加到被访问过的链接 |
| :first-child | 将特殊的样式添加到元素的第一个子元素 |
| :lang | 允许创作者来定义指定的元素中使用的语言 |

接下来是**伪元素**：
| 伪元素| 作用 | 
| ------ |:--------| 
| :first-letter | 将特殊的样式添加到文本的首字母 |
| :first-line | 将特殊的样式添加到文本的首行 | 
| :before | 在某元素之前插入某些内容 |
| :after | 在某元素之后插入某些内容 |


最后说一下css3中的伪类选择器：nth-child和nth-of-type。
nth-child可以用来灵活地选取子元素：

```
nth-child(odd) //奇数
nth-child(an+b) //按照一定的规律
```
但是nth-child有一个问题，就是它在计算子元素时会 连同父元素的其他子元素一起计算。而我们可能只需要同类一起计算，这个时候就需要用到nth-of-type了。
举一个例子：

```
<style>
p:nth-child(2) {color:red;}
p:nth-of-type(2) {color:yellow;}
</style>
<div>
  <div>firstchild</div>
  <p>firstp</p><!--这个会变红-->
  <p>secondp</p><!--这个会变黄-->
</div>  
```

具体可以参考，[nth-child和nth-of-type的区别](http://www.zhangxinxu.com/wordpress/2011/06/css3%E9%80%89%E6%8B%A9%E5%99%A8nth-child%E5%92%8Cnth-of-type%E4%B9%8B%E9%97%B4%E7%9A%84%E5%B7%AE%E5%BC%82/)。

###**应用**

首先我们需要明确一点，css选择器是**从右到左**地进行规制匹配，明白了这一点后，我们来看一个例子：
```
#id a {
  font-weight:bold;
}
```
按照我们刚才说的，选择器会先匹配所有的a标签，再去匹配id为id的标签。这样看似高效的选择器在实际中的匹配开销是很高的。所以最右边的选择器其实应该是最关键的因素。

我认为可以遵循以下几个规则来优化css选择器的性能：
1. 当使用id选择器时只需要单独使用即可。
2. 尽量避免多层标签选择器，可以使用class选择器来替换，从而减少查询。
3. 能够通过继承的css属性，没有必要使用多个选择器。



---
##**维护**

建议将css分为不同的模块化来进行管理。然后在项目发布上线的时候通过自动化工具进行合并。当然，开发的时候也需要有良好的注释习惯，这样便于多人开发和共同维护。
一般的css文档结构应该如下：

 - 一般性样式
    - 主体样式
    - reset样式
    - 链接
    - 标题
    - 其他元素
 - 辅助样式
  - 表单
  - 通知和错误
  - 一致的条目
 - 页面和结构
   - 标题、页脚和导航
   - 布局
   - 其他页面结构元素
 - 页面组件
  - 各个组件 


当然，注释会使得css文件显著加大，而我们为了提升加载速度，必须在上线前将注释删除。减小文件大小的最好方法可能是启用服务器压缩，如果使用apache服务器，那么应该按照mod_gzip或mod_deflate。所有现代浏览器都可以处理用GZIP压缩的文件并进行即使解压。

